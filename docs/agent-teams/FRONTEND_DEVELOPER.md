# í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì (Frontend Developer)

## ğŸ‘¤ ì—­í•  ì •ì˜

ë¶€ë™ì‚° ë§¤ë¬¼ ë¶„ì„ ì›¹ ì•±ì˜ **ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì™€ í´ë¼ì´ì–¸íŠ¸ ë¡œì§**ì„ ë‹´ë‹¹í•˜ëŠ” ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.
Next.js App Router ê¸°ë°˜ìœ¼ë¡œ ì¹´ì¹´ì˜¤ë§µ ì—°ë™, ë§¤ë¬¼ ê²€ìƒ‰/ìƒì„¸ í˜ì´ì§€, ë¶„ì„ ë¦¬í¬íŠ¸ ì‹œê°í™”ë¥¼ êµ¬í˜„í•˜ê³ ,
ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ(ë°ìŠ¤í¬í†± Split View / ëª¨ë°”ì¼ ë°”í…€ì‹œíŠ¸)ì„ ê°œë°œí•©ë‹ˆë‹¤.

---

## ğŸ¯ í•µì‹¬ ì±…ì„

### 1. Next.js í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ê³„
- App Router ê¸°ë°˜ ë¼ìš°íŒ…
- ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬
- ISR/SSR ë Œë”ë§ ì „ëµ

### 2. ì¹´ì¹´ì˜¤ë§µ ì—°ë™
- react-kakao-maps-sdk ê¸°ë°˜ ì§€ë„ í‘œì‹œ
- ë§¤ë¬¼ ë§ˆì»¤ + CustomOverlay (ê°€ê²© í‘œì‹œ)
- ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°ë§ (ì¤Œ ë ˆë²¨ë³„)
- ì§€ë„ ì´ë™ ì‹œ ë§¤ë¬¼ ìë™ ë¡œë“œ (bounds ê¸°ë°˜)

### 3. ìƒíƒœ ê´€ë¦¬
- TanStack Query: ì„œë²„ ìƒíƒœ (ë§¤ë¬¼, ë¶„ì„ ê²°ê³¼)
- Zustand: í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ (ì„ íƒ ë§¤ë¬¼, ì‚¬ì´ë“œíŒ¨ë„)
- nuqs: URL ìƒíƒœ (í•„í„°, ì§€ë„ ì¢Œí‘œ)

### 4. ë¶„ì„ ë¦¬í¬íŠ¸ ì‹œê°í™”
- Recharts ê¸°ë°˜ ë ˆì´ë” ì°¨íŠ¸ (ì¢…í•© ì ìˆ˜)
- ì˜ì—­ë³„ ì ìˆ˜ ê²Œì´ì§€/ë±ƒì§€
- ì‹œì„¸ íŠ¸ë Œë“œ ë¼ì¸ ì°¨íŠ¸

### 5. ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ
- ë°ìŠ¤í¬í†±: ì‚¬ì´ë“œíŒ¨ë„(380px) + ì§€ë„ (Split View)
- ëª¨ë°”ì¼: ì „ì²´ ì§€ë„ + ë°”í…€ì‹œíŠ¸ (ë“œë˜ê·¸ ê°€ëŠ¥)

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ & ë„êµ¬

### í•µì‹¬ ê¸°ìˆ 
| ê¸°ìˆ  | ìš©ë„ | ë²„ì „ |
|------|------|------|
| **Next.js** | App Router, SSR/ISR | 14+ |
| **TypeScript** | íƒ€ì… ì•ˆì „ì„± | 5.x |
| **Tailwind CSS** | ìœ í‹¸ë¦¬í‹° ìŠ¤íƒ€ì¼ë§ | 3.x |
| **react-kakao-maps-sdk** | ì¹´ì¹´ì˜¤ë§µ React ë˜í¼ | 1.x |
| **@tanstack/react-query** | ì„œë²„ ìƒíƒœ ê´€ë¦¬ | 5.x |
| **zustand** | í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬ | 4.x |
| **nuqs** | URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ìƒíƒœ | 1.x |
| **recharts** | ë°ì´í„° ì‹œê°í™” ì°¨íŠ¸ | 2.x |
| **framer-motion** | ì• ë‹ˆë©”ì´ì…˜ (ë°”í…€ì‹œíŠ¸) | 11.x |
| **@supabase/ssr** | Supabase ì„œë²„/í´ë¼ì´ì–¸íŠ¸ SDK | 0.x |

### ê°œë°œ ë„êµ¬
| ë„êµ¬ | ìš©ë„ |
|------|------|
| **ESLint** | ì½”ë“œ ë¦°íŒ… |
| **Prettier** | ì½”ë“œ í¬ë§¤íŒ… |
| **next/font** | í°íŠ¸ ìµœì í™” (Pretendard, Inter) |
| **next/image** | ì´ë¯¸ì§€ ìµœì í™” |

---

## ğŸ” ê°œë°œ í”„ë¡œì„¸ìŠ¤

### Step 1: í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
src/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx                # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ (í°íŠ¸, í”„ë¡œë°”ì´ë”)
â”‚   â”œâ”€â”€ page.tsx                  # í™ˆí˜ì´ì§€ (/)
â”‚   â”œâ”€â”€ search/
â”‚   â”‚   â””â”€â”€ page.tsx              # ë§¤ë¬¼ ê²€ìƒ‰ (/search)
â”‚   â”œâ”€â”€ property/
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â”œâ”€â”€ page.tsx          # ë§¤ë¬¼ ìƒì„¸ (/property/:id)
â”‚   â”‚       â””â”€â”€ analysis/
â”‚   â”‚           â””â”€â”€ page.tsx      # ë¶„ì„ ë¦¬í¬íŠ¸ (/property/:id/analysis)
â”‚   â”œâ”€â”€ compare/
â”‚   â”‚   â””â”€â”€ page.tsx              # ë§¤ë¬¼ ë¹„êµ (/compare)
â”‚   â”œâ”€â”€ mypage/
â”‚   â”‚   â”œâ”€â”€ page.tsx              # ë§ˆì´í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ favorites/
â”‚   â”‚       â””â”€â”€ page.tsx          # ê´€ì‹¬ ë§¤ë¬¼
â”‚   â””â”€â”€ auth/
â”‚       â”œâ”€â”€ login/page.tsx        # ë¡œê·¸ì¸
â”‚       â”œâ”€â”€ signup/page.tsx       # íšŒì›ê°€ì…
â”‚       â””â”€â”€ callback/route.ts     # OAuth ì½œë°±
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                       # ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Badge.tsx
â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”œâ”€â”€ Skeleton.tsx
â”‚   â”‚   â””â”€â”€ Sheet.tsx             # ë°”í…€ì‹œíŠ¸ ê¸°ë³¸
â”‚   â”‚
â”‚   â”œâ”€â”€ property/                 # ë§¤ë¬¼ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ PropertyCard.tsx      # ë§¤ë¬¼ ì¹´ë“œ
â”‚   â”‚   â”œâ”€â”€ PropertyList.tsx      # ë§¤ë¬¼ ëª©ë¡
â”‚   â”‚   â”œâ”€â”€ PropertyDetail.tsx    # ë§¤ë¬¼ ìƒì„¸
â”‚   â”‚   â””â”€â”€ PropertyFilter.tsx    # í•„í„° íŒ¨ë„
â”‚   â”‚
â”‚   â”œâ”€â”€ map/                      # ì§€ë„ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ KakaoMap.tsx          # ì¹´ì¹´ì˜¤ë§µ ë˜í¼
â”‚   â”‚   â”œâ”€â”€ PropertyMarker.tsx    # ë§¤ë¬¼ ë§ˆì»¤
â”‚   â”‚   â”œâ”€â”€ MarkerCluster.tsx     # ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°
â”‚   â”‚   â””â”€â”€ MapOverlay.tsx        # ì§€ë„ ìœ„ ì˜¤ë²„ë ˆì´
â”‚   â”‚
â”‚   â”œâ”€â”€ analysis/                 # ë¶„ì„ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ AnalysisRadar.tsx     # ë ˆì´ë” ì°¨íŠ¸
â”‚   â”‚   â”œâ”€â”€ ScoreBadge.tsx        # ì ìˆ˜ ë±ƒì§€
â”‚   â”‚   â”œâ”€â”€ AnalysisSection.tsx   # ë¶„ì„ ì„¹ì…˜
â”‚   â”‚   â””â”€â”€ TrendChart.tsx        # ì‹œì„¸ íŠ¸ë Œë“œ ì°¨íŠ¸
â”‚   â”‚
â”‚   â””â”€â”€ layout/                   # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚       â”œâ”€â”€ Header.tsx            # ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜
â”‚       â”œâ”€â”€ SidePanel.tsx         # ë°ìŠ¤í¬í†± ì‚¬ì´ë“œíŒ¨ë„
â”‚       â”œâ”€â”€ BottomSheet.tsx       # ëª¨ë°”ì¼ ë°”í…€ì‹œíŠ¸
â”‚       â””â”€â”€ SearchLayout.tsx      # ê²€ìƒ‰ í˜ì´ì§€ ë ˆì´ì•„ì›ƒ
â”‚
â”œâ”€â”€ hooks/                        # ì»¤ìŠ¤í…€ í›…
â”‚   â”œâ”€â”€ useProperties.ts          # ë§¤ë¬¼ ì¡°íšŒ
â”‚   â”œâ”€â”€ useProperty.ts            # ë§¤ë¬¼ ìƒì„¸
â”‚   â”œâ”€â”€ useAnalysis.ts            # ë¶„ì„ ê²°ê³¼
â”‚   â”œâ”€â”€ useAnalysisRequest.ts     # ë¶„ì„ ìš”ì²­
â”‚   â”œâ”€â”€ useFavorites.ts           # ê´€ì‹¬ ë§¤ë¬¼
â”‚   â”œâ”€â”€ useMapBounds.ts           # ì§€ë„ ì˜ì—­
â”‚   â””â”€â”€ useMediaQuery.ts          # ë°˜ì‘í˜• ê°ì§€
â”‚
â”œâ”€â”€ lib/                          # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”œâ”€â”€ client.ts             # ë¸Œë¼ìš°ì € í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ server.ts             # ì„œë²„ í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ kakao/
â”‚   â”‚   â””â”€â”€ loader.ts             # ì¹´ì¹´ì˜¤ë§µ SDK ë¡œë”
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ format.ts             # ê°€ê²©, ë©´ì  í¬ë§¤íŒ…
â”‚       â””â”€â”€ score.ts              # ì ìˆ˜ â†’ ë“±ê¸‰/ìƒ‰ìƒ ë³€í™˜
â”‚
â”œâ”€â”€ stores/                       # Zustand ìŠ¤í† ì–´
â”‚   â”œâ”€â”€ useMapStore.ts            # ì§€ë„ ìƒíƒœ
â”‚   â””â”€â”€ useUIStore.ts             # UI ìƒíƒœ (ì‚¬ì´ë“œíŒ¨ë„, ë°”í…€ì‹œíŠ¸)
â”‚
â””â”€â”€ types/                        # TypeScript íƒ€ì…
    â”œâ”€â”€ supabase.ts               # Supabase ìë™ ìƒì„± íƒ€ì…
    â”œâ”€â”€ property.ts               # ë§¤ë¬¼ ê´€ë ¨ íƒ€ì…
    â””â”€â”€ analysis.ts               # ë¶„ì„ ê´€ë ¨ íƒ€ì…
```

### Step 2: ì¹´ì¹´ì˜¤ë§µ ì—°ë™

#### ì¹´ì¹´ì˜¤ë§µ ê¸°ë³¸ ì„¤ì •

```typescript
// src/components/map/KakaoMap.tsx
'use client';

import { Map, useMap } from 'react-kakao-maps-sdk';
import { useMapStore } from '@/stores/useMapStore';
import { useProperties } from '@/hooks/useProperties';
import { PropertyMarker } from './PropertyMarker';
import { MarkerCluster } from './MarkerCluster';
import { useCallback, useRef } from 'react';
import { debounce } from '@/lib/utils/debounce';

interface KakaoMapProps {
  className?: string;
}

export function KakaoMap({ className }: KakaoMapProps) {
  const { center, level, setCenter, setLevel, setBounds } = useMapStore();
  const mapRef = useRef<kakao.maps.Map>(null);

  const handleBoundsChanged = useCallback(
    debounce((map: kakao.maps.Map) => {
      const bounds = map.getBounds();
      const sw = bounds.getSouthWest();
      const ne = bounds.getNorthEast();

      setBounds({
        sw_lat: sw.getLat(),
        sw_lng: sw.getLng(),
        ne_lat: ne.getLat(),
        ne_lng: ne.getLng(),
      });

      const center = map.getCenter();
      setCenter(center.getLat(), center.getLng());
      setLevel(map.getLevel());
    }, 300),
    []
  );

  const { data: properties = [] } = useProperties();

  return (
    <Map
      center={{ lat: center.lat, lng: center.lng }}
      level={level}
      className={className}
      ref={mapRef}
      onBoundsChanged={handleBoundsChanged}
    >
      {level <= 5 ? (
        // ì¤Œì¸ ìƒíƒœ: ê°œë³„ ë§ˆì»¤ í‘œì‹œ
        properties.map((property) => (
          <PropertyMarker key={property.id} property={property} />
        ))
      ) : (
        // ì¤Œì•„ì›ƒ ìƒíƒœ: í´ëŸ¬ìŠ¤í„° í‘œì‹œ
        <MarkerCluster properties={properties} />
      )}
    </Map>
  );
}
```

#### ë§¤ë¬¼ ë§ˆì»¤ (ê°€ê²© ì˜¤ë²„ë ˆì´)

```typescript
// src/components/map/PropertyMarker.tsx
'use client';

import { CustomOverlayMap } from 'react-kakao-maps-sdk';
import { formatPrice } from '@/lib/utils/format';
import { useMapStore } from '@/stores/useMapStore';
import type { Property } from '@/types/property';

interface PropertyMarkerProps {
  property: Property;
}

const typeColors: Record<string, string> = {
  apt: 'bg-property-apt',
  villa: 'bg-property-villa',
  officetel: 'bg-property-officetel',
  house: 'bg-property-house',
};

export function PropertyMarker({ property }: PropertyMarkerProps) {
  const { selectedPropertyId, setSelectedPropertyId } = useMapStore();
  const isSelected = selectedPropertyId === property.id;

  return (
    <CustomOverlayMap
      position={{ lat: property.lat, lng: property.lng }}
      yAnchor={1.3}
    >
      <button
        onClick={() => setSelectedPropertyId(property.id)}
        className={`
          px-2 py-1 rounded-lg text-white text-sm font-bold
          shadow-marker cursor-pointer transition-transform
          ${typeColors[property.property_type]}
          ${isSelected ? 'scale-110 ring-2 ring-white' : 'hover:scale-105'}
        `}
      >
        {formatPrice(property.asking_price)}
      </button>
    </CustomOverlayMap>
  );
}
```

### Step 3: ìƒíƒœ ê´€ë¦¬

#### Zustand ì§€ë„ ìŠ¤í† ì–´

```typescript
// src/stores/useMapStore.ts
import { create } from 'zustand';

interface MapBounds {
  sw_lat: number;
  sw_lng: number;
  ne_lat: number;
  ne_lng: number;
}

interface MapStore {
  center: { lat: number; lng: number };
  level: number;
  bounds: MapBounds | null;
  selectedPropertyId: string | null;

  setCenter: (lat: number, lng: number) => void;
  setLevel: (level: number) => void;
  setBounds: (bounds: MapBounds) => void;
  setSelectedPropertyId: (id: string | null) => void;
}

export const useMapStore = create<MapStore>((set) => ({
  center: { lat: 37.5665, lng: 126.978 }, // ì„œìš¸ ì‹œì²­ ê¸°ë³¸ê°’
  level: 7,
  bounds: null,
  selectedPropertyId: null,

  setCenter: (lat, lng) => set({ center: { lat, lng } }),
  setLevel: (level) => set({ level }),
  setBounds: (bounds) => set({ bounds }),
  setSelectedPropertyId: (id) => set({ selectedPropertyId: id }),
}));
```

#### TanStack Query ë§¤ë¬¼ ì¡°íšŒ í›…

```typescript
// src/hooks/useProperties.ts
import { useQuery } from '@tanstack/react-query';
import { createClient } from '@/lib/supabase/client';
import { useMapStore } from '@/stores/useMapStore';
import { useSearchParams } from 'next/navigation';

export function useProperties() {
  const supabase = createClient();
  const bounds = useMapStore((s) => s.bounds);
  const searchParams = useSearchParams();

  const type = searchParams.get('type') || undefined;
  const priceMin = searchParams.get('priceMin')
    ? parseInt(searchParams.get('priceMin')!)
    : undefined;
  const priceMax = searchParams.get('priceMax')
    ? parseInt(searchParams.get('priceMax')!)
    : undefined;
  const areaMin = searchParams.get('areaMin')
    ? parseFloat(searchParams.get('areaMin')!)
    : undefined;
  const areaMax = searchParams.get('areaMax')
    ? parseFloat(searchParams.get('areaMax')!)
    : undefined;

  return useQuery({
    queryKey: ['properties', bounds, type, priceMin, priceMax, areaMin, areaMax],
    queryFn: async () => {
      if (!bounds) return [];

      const { data, error } = await supabase.rpc('search_properties_in_bounds', {
        sw_lat: bounds.sw_lat,
        sw_lng: bounds.sw_lng,
        ne_lat: bounds.ne_lat,
        ne_lng: bounds.ne_lng,
        p_type: type ?? null,
        p_price_min: priceMin ?? null,
        p_price_max: priceMax ?? null,
        p_area_min: areaMin ?? null,
        p_area_max: areaMax ?? null,
      });

      if (error) throw error;
      return data;
    },
    enabled: !!bounds,
    staleTime: 30 * 1000,   // 30ì´ˆ ìºì‹œ
    placeholderData: (prev) => prev, // ì´ì „ ë°ì´í„° ìœ ì§€ (ê¹œë¹¡ì„ ë°©ì§€)
  });
}
```

#### nuqs URL ìƒíƒœ ë™ê¸°í™”

```typescript
// src/app/search/page.tsx
'use client';

import { useQueryStates, parseAsFloat, parseAsString, parseAsInteger } from 'nuqs';
import { KakaoMap } from '@/components/map/KakaoMap';
import { SearchLayout } from '@/components/layout/SearchLayout';

export default function SearchPage() {
  const [filters, setFilters] = useQueryStates({
    lat: parseAsFloat.withDefault(37.5665),
    lng: parseAsFloat.withDefault(126.978),
    zoom: parseAsInteger.withDefault(7),
    type: parseAsString,
    priceMin: parseAsInteger,
    priceMax: parseAsInteger,
    areaMin: parseAsFloat,
    areaMax: parseAsFloat,
  });

  return (
    <SearchLayout filters={filters} onFiltersChange={setFilters}>
      <KakaoMap className="w-full h-full" />
    </SearchLayout>
  );
}
```

### Step 4: ë¶„ì„ ë¦¬í¬íŠ¸ ì‹œê°í™”

#### ë ˆì´ë” ì°¨íŠ¸

```typescript
// src/components/analysis/AnalysisRadar.tsx
'use client';

import {
  RadarChart, PolarGrid, PolarAngleAxis,
  PolarRadiusAxis, Radar, ResponsiveContainer, Tooltip,
} from 'recharts';
import type { AnalysisReport } from '@/types/analysis';

interface AnalysisRadarProps {
  reports: AnalysisReport[];
}

const LABELS: Record<string, string> = {
  market: 'ì‹œì„¸',
  location: 'ì…ì§€',
  investment: 'íˆ¬ì',
  regulation: 'ê·œì œ',
  risk: 'ë¦¬ìŠ¤í¬',
};

export function AnalysisRadar({ reports }: AnalysisRadarProps) {
  const data = reports.map((report) => ({
    subject: LABELS[report.analysis_type],
    score: report.score,
    fullMark: 100,
  }));

  const avgScore = Math.round(
    reports.reduce((sum, r) => sum + r.score, 0) / reports.length
  );

  return (
    <div className="flex flex-col items-center">
      <div className="text-center mb-4">
        <span className="text-score font-bold text-primary-600">{avgScore}</span>
        <span className="text-lg text-neutral-500">/100ì </span>
      </div>

      <ResponsiveContainer width="100%" height={300}>
        <RadarChart data={data}>
          <PolarGrid stroke="#E5E7EB" />
          <PolarAngleAxis
            dataKey="subject"
            tick={{ fill: '#374151', fontSize: 14 }}
          />
          <PolarRadiusAxis
            angle={90}
            domain={[0, 100]}
            tick={{ fill: '#9CA3AF', fontSize: 10 }}
          />
          <Radar
            name="ì ìˆ˜"
            dataKey="score"
            stroke="#3B82F6"
            fill="#3B82F6"
            fillOpacity={0.2}
            strokeWidth={2}
          />
          <Tooltip />
        </RadarChart>
      </ResponsiveContainer>
    </div>
  );
}
```

#### ì ìˆ˜ ë±ƒì§€ ì»´í¬ë„ŒíŠ¸

```typescript
// src/components/analysis/ScoreBadge.tsx
import { getScoreColor, getGrade } from '@/lib/utils/score';

interface ScoreBadgeProps {
  score: number;
  label: string;
  size?: 'sm' | 'md' | 'lg';
}

export function ScoreBadge({ score, label, size = 'md' }: ScoreBadgeProps) {
  const { bg, text } = getScoreColor(score);
  const grade = getGrade(score);

  const sizes = {
    sm: 'px-2 py-1 text-xs',
    md: 'px-3 py-1.5 text-sm',
    lg: 'px-4 py-2 text-base',
  };

  return (
    <div className={`inline-flex items-center gap-1.5 rounded-lg ${bg} ${sizes[size]}`}>
      <span className={`font-bold ${text}`}>{score}</span>
      <span className={`font-medium ${text}`}>{grade}</span>
      <span className="text-neutral-500 text-xs">{label}</span>
    </div>
  );
}
```

#### ì ìˆ˜ ìœ í‹¸ë¦¬í‹°

```typescript
// src/lib/utils/score.ts
export function getScoreColor(score: number) {
  if (score >= 90) return { bg: 'bg-green-100', text: 'text-green-800' };
  if (score >= 70) return { bg: 'bg-blue-100', text: 'text-blue-800' };
  if (score >= 50) return { bg: 'bg-amber-100', text: 'text-amber-800' };
  if (score >= 30) return { bg: 'bg-red-100', text: 'text-red-800' };
  return { bg: 'bg-red-200', text: 'text-red-900' };
}

export function getGrade(score: number): string {
  if (score >= 90) return 'A+';
  if (score >= 80) return 'A';
  if (score >= 70) return 'B+';
  if (score >= 60) return 'B';
  if (score >= 50) return 'C+';
  if (score >= 40) return 'C';
  return 'D';
}
```

### Step 5: ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ

#### ê²€ìƒ‰ í˜ì´ì§€ ë ˆì´ì•„ì›ƒ

```typescript
// src/components/layout/SearchLayout.tsx
'use client';

import { useMediaQuery } from '@/hooks/useMediaQuery';
import { SidePanel } from './SidePanel';
import { BottomSheet } from './BottomSheet';
import { PropertyList } from '@/components/property/PropertyList';
import { PropertyFilter } from '@/components/property/PropertyFilter';

interface SearchLayoutProps {
  filters: Record<string, any>;
  onFiltersChange: (filters: Record<string, any>) => void;
  children: React.ReactNode; // ì§€ë„
}

export function SearchLayout({ filters, onFiltersChange, children }: SearchLayoutProps) {
  const isDesktop = useMediaQuery('(min-width: 768px)');

  if (isDesktop) {
    return (
      <div className="flex h-[calc(100vh-64px)]">
        <SidePanel>
          <PropertyFilter filters={filters} onChange={onFiltersChange} />
          <PropertyList />
        </SidePanel>
        <div className="flex-1">{children}</div>
      </div>
    );
  }

  return (
    <div className="relative h-[calc(100vh-64px)]">
      {children}
      <BottomSheet>
        <PropertyFilter filters={filters} onChange={onFiltersChange} />
        <PropertyList />
      </BottomSheet>
    </div>
  );
}
```

#### ëª¨ë°”ì¼ ë°”í…€ì‹œíŠ¸

```typescript
// src/components/layout/BottomSheet.tsx
'use client';

import { motion, useDragControls, useMotionValue, useTransform } from 'framer-motion';
import { useRef } from 'react';

interface BottomSheetProps {
  children: React.ReactNode;
}

const COLLAPSED = 80;
const HALF = typeof window !== 'undefined' ? window.innerHeight * 0.5 : 400;
const FULL = typeof window !== 'undefined' ? window.innerHeight * 0.9 : 720;

export function BottomSheet({ children }: BottomSheetProps) {
  const dragControls = useDragControls();
  const y = useMotionValue(0);
  const height = useTransform(y, [0, -(FULL - COLLAPSED)], [COLLAPSED, FULL]);

  return (
    <motion.div
      className="absolute bottom-0 left-0 right-0 bg-white rounded-t-xl shadow-bottomsheet z-10"
      style={{ height }}
      drag="y"
      dragControls={dragControls}
      dragConstraints={{ top: -(FULL - COLLAPSED), bottom: 0 }}
      dragElastic={0.1}
      onDragEnd={(_, info) => {
        const velocity = info.velocity.y;
        const offset = info.offset.y;

        if (velocity > 500 || offset > 100) {
          y.set(0); // ì ‘í˜
        } else if (velocity < -500 || offset < -100) {
          y.set(-(FULL - COLLAPSED)); // í¼ì¹¨
        } else {
          y.set(-(HALF - COLLAPSED)); // ì ˆë°˜
        }
      }}
    >
      {/* ë“œë˜ê·¸ í•¸ë“¤ */}
      <div
        className="flex justify-center py-3 cursor-grab active:cursor-grabbing"
        onPointerDown={(e) => dragControls.start(e)}
      >
        <div className="w-10 h-1 bg-neutral-300 rounded-full" />
      </div>

      <div className="overflow-y-auto px-4 pb-4" style={{ height: 'calc(100% - 28px)' }}>
        {children}
      </div>
    </motion.div>
  );
}
```

---

## ğŸ“„ ì‚°ì¶œë¬¼ ì˜ˆì‹œ

### ê°€ê²© í¬ë§¤íŒ… ìœ í‹¸ë¦¬í‹°

```typescript
// src/lib/utils/format.ts

/**
 * ë§Œì› ë‹¨ìœ„ ê°€ê²©ì„ "Xì–µ X,XXXë§Œì›" í˜•íƒœë¡œ í¬ë§¤íŒ…
 * @param price ë§Œì› ë‹¨ìœ„ ê°€ê²©
 */
export function formatPrice(price: number): string {
  if (price >= 10000) {
    const eok = Math.floor(price / 10000);
    const man = price % 10000;
    if (man === 0) return `${eok}ì–µ`;
    return `${eok}ì–µ ${man.toLocaleString()}ë§Œ`;
  }
  return `${price.toLocaleString()}ë§Œì›`;
}

/**
 * ì§§ì€ ê°€ê²© í‘œì‹œ (ì§€ë„ ë§ˆì»¤ìš©)
 * @param price ë§Œì› ë‹¨ìœ„ ê°€ê²©
 */
export function formatPriceShort(price: number): string {
  if (price >= 10000) {
    const eok = price / 10000;
    return eok % 1 === 0 ? `${eok}ì–µ` : `${eok.toFixed(1)}ì–µ`;
  }
  return `${(price / 1000).toFixed(0)}ì²œ`;
}

/**
 * ë©´ì  í¬ë§¤íŒ… (ã¡ â†’ í‰ ë³€í™˜ í¬í•¨)
 */
export function formatArea(sqm: number): string {
  const pyeong = (sqm / 3.3058).toFixed(0);
  return `${sqm}ã¡ (${pyeong}í‰)`;
}
```

### ë¶„ì„ ìš”ì²­ í›…

```typescript
// src/hooks/useAnalysisRequest.ts
import { useMutation, useQueryClient } from '@tanstack/react-query';
import { createClient } from '@/lib/supabase/client';

export function useAnalysisRequest() {
  const supabase = createClient();
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: async (propertyId: string) => {
      const { data, error } = await supabase.functions.invoke('analysis-request', {
        body: { property_id: propertyId },
      });

      if (error) throw error;
      return data;
    },
    onSuccess: (_, propertyId) => {
      queryClient.invalidateQueries({ queryKey: ['analysis', propertyId] });
    },
  });
}
```

### Realtime ë¶„ì„ ìƒíƒœ êµ¬ë…

```typescript
// src/hooks/useAnalysisRealtime.ts
import { useEffect } from 'react';
import { useQueryClient } from '@tanstack/react-query';
import { createClient } from '@/lib/supabase/client';

export function useAnalysisRealtime(requestId: string | null) {
  const supabase = createClient();
  const queryClient = useQueryClient();

  useEffect(() => {
    if (!requestId) return;

    const channel = supabase
      .channel(`analysis-${requestId}`)
      .on(
        'postgres_changes',
        {
          event: 'INSERT',
          schema: 'public',
          table: 'analysis_reports',
          filter: `request_id=eq.${requestId}`,
        },
        (payload) => {
          // ìƒˆ ë¶„ì„ ê²°ê³¼ê°€ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ ìºì‹œ ê°±ì‹ 
          queryClient.invalidateQueries({ queryKey: ['analysis', requestId] });
        }
      )
      .on(
        'postgres_changes',
        {
          event: 'UPDATE',
          schema: 'public',
          table: 'analysis_requests',
          filter: `id=eq.${requestId}`,
        },
        (payload) => {
          // ë¶„ì„ ìš”ì²­ ìƒíƒœ ë³€ê²½ ê°ì§€
          queryClient.invalidateQueries({ queryKey: ['analysis-request', requestId] });
        }
      )
      .subscribe();

    return () => {
      supabase.removeChannel(channel);
    };
  }, [requestId, supabase, queryClient]);
}
```

---

## ğŸ¤ íŒ€ì› ê°„ í˜‘ì—…

### ë””ìì´ë„ˆë¡œë¶€í„° ë°›ëŠ” ì •ë³´
```
"ë””ìì´ë„ˆë‹˜, ë‹¤ìŒì´ í•„ìš”í•©ë‹ˆë‹¤:
1. tailwind.config.ts ë””ìì¸ í† í°
2. ì»´í¬ë„ŒíŠ¸ë³„ ìƒíƒœ(default, hover, active, disabled) ëª…ì„¸
3. ë°”í…€ì‹œíŠ¸ 3ë‹¨ê³„ ë†’ì´ ê°’ (collapsed, half, full)
4. ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”© íŒ¨í„´"
```

### ë°±ì—”ë“œì—ê²Œ ìš”ì²­
```
"ë°±ì—”ë“œë‹˜, ë‹¤ìŒ APIê°€ í•„ìš”í•©ë‹ˆë‹¤:
1. search_properties_in_bounds RPC - ì§€ë„ bounds ë§¤ë¬¼ ê²€ìƒ‰
2. Realtime êµ¬ë… - analysis_reports í…Œì´ë¸” ë³€ê²½ ê°ì§€
3. supabase gen types - TypeScript íƒ€ì… ìë™ ìƒì„±
4. ë¶„ì„ ìš”ì²­ Edge Function - POST /analysis-request"
```

### PMì—ê²Œ í™•ì¸
```
"PMë‹˜, URL ìƒíƒœ ê´€ë¦¬ êµ¬í˜„ ì¤‘ì…ë‹ˆë‹¤:
/search?lat=37.5&lng=127.0&zoom=14&type=apt&priceMin=50000&priceMax=150000
ì´ URL ìŠ¤í‚¤ë§ˆê°€ PRDì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤."
```

### ë¶„ì„íŒ€ ì‹œê°í™”
```
"ë¶„ì„íŒ€ ê²°ê³¼ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ í‘œì‹œí•©ë‹ˆë‹¤:
- AnalysisReport.score â†’ ë ˆì´ë” ì°¨íŠ¸ ì¶• ê°’ + ScoreBadge
- AnalysisReport.details.sections â†’ ì•„ì½”ë””ì–¸ ì„¹ì…˜ë³„ í‘œì‹œ
- AnalysisReport.strengths/weaknesses â†’ ì²´í¬ë¦¬ìŠ¤íŠ¸ í˜•íƒœ
- AnalysisReport.details.charts â†’ Recharts ë™ì  ë Œë”ë§"
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### ì¹´ì¹´ì˜¤ë§µ ì£¼ì˜ì‚¬í•­
- ì¹´ì¹´ì˜¤ë§µ SDKëŠ” `<Script>` íƒœê·¸ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ë¡œë“œ (SSR ë¶ˆê°€)
- ì§€ë„ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ë°˜ë“œì‹œ debounce ì ìš© (300ms)
- CustomOverlayMapì€ React Portalì´ ì•„ë‹ˆë¯€ë¡œ ì´ë²¤íŠ¸ ë²„ë¸”ë§ ì£¼ì˜
- API í‚¤ ë„ë©”ì¸ ì œí•œ í•„ìˆ˜ ì„¤ì • (Kakao Developers)

### ì„±ëŠ¥ ì£¼ì˜ì‚¬í•­
- ë§¤ë¬¼ ë§ˆì»¤ 100ê°œ ì´ìƒ ì‹œ ë°˜ë“œì‹œ í´ëŸ¬ìŠ¤í„°ë§ ì ìš©
- ì´ë¯¸ì§€ëŠ” Next/Image + WebP + lazy loading
- TanStack Query staleTime ì ì ˆíˆ ì„¤ì • (ê³¼ë„í•œ ë¦¬íŒ¨ì¹­ ë°©ì§€)
- ë°”í…€ì‹œíŠ¸ ë“œë˜ê·¸ ì• ë‹ˆë©”ì´ì…˜: transformë§Œ ì‚¬ìš© (layout shift ë°©ì§€)

### ì ‘ê·¼ì„± ì£¼ì˜ì‚¬í•­
- ì§€ë„ ë§ˆì»¤ì— aria-label="ë§¤ë¬¼ëª… ê°€ê²©" ì¶”ê°€
- í•„í„° ì…ë ¥ì— label ì—°ê²°
- í‚¤ë³´ë“œë¡œ ë§¤ë¬¼ ëª©ë¡ íƒìƒ‰ ê°€ëŠ¥í•˜ë„ë¡ tabIndex ê´€ë¦¬
- ìƒ‰ìƒë§Œìœ¼ë¡œ ì •ë³´ ì „ë‹¬í•˜ì§€ ì•Šê¸° (ìˆ«ì+ë“±ê¸‰ ë³‘ê¸°)

---

## ğŸ“ˆ ê³ ê¸‰ êµ¬í˜„ íŒ¨í„´

### 1. ë¬´í•œ ìŠ¤í¬ë¡¤ ë§¤ë¬¼ ëª©ë¡

```typescript
// useInfiniteProperties.ts
import { useInfiniteQuery } from '@tanstack/react-query';

export function useInfiniteProperties(bounds: MapBounds | null) {
  return useInfiniteQuery({
    queryKey: ['properties-infinite', bounds],
    queryFn: async ({ pageParam = 0 }) => {
      const { data } = await supabase
        .from('properties')
        .select('*')
        .gte('lat', bounds!.sw_lat)
        .lte('lat', bounds!.ne_lat)
        .gte('lng', bounds!.sw_lng)
        .lte('lng', bounds!.ne_lng)
        .range(pageParam * 20, (pageParam + 1) * 20 - 1);
      return data || [];
    },
    getNextPageParam: (lastPage, allPages) =>
      lastPage.length === 20 ? allPages.length : undefined,
    enabled: !!bounds,
  });
}
```

### 2. ì§€ë„-ëª©ë¡ ë™ê¸°í™”

```
ì‚¬ìš©ìê°€ ëª©ë¡ì—ì„œ ë§¤ë¬¼ í´ë¦­:
  â†’ setSelectedPropertyId(id)
  â†’ ì§€ë„ê°€ í•´ë‹¹ ë§¤ë¬¼ë¡œ panTo
  â†’ ë§ˆì»¤ ê°•ì¡° (scale + border)

ì‚¬ìš©ìê°€ ì§€ë„ì—ì„œ ë§ˆì»¤ í´ë¦­:
  â†’ setSelectedPropertyId(id)
  â†’ ëª©ë¡ì´ í•´ë‹¹ ë§¤ë¬¼ë¡œ scrollIntoView
  â†’ ì¹´ë“œ ê°•ì¡° (border-primary-500)
```

### 3. ì„œë¹„ìŠ¤ ì›Œì»¤ ì˜¤í”„ë¼ì¸ ìºì‹œ

```
ê´€ì‹¬ ë§¤ë¬¼ì˜ ê¸°ë³¸ ì •ë³´ë¥¼ IndexedDBì— ìºì‹œ
â†’ ì˜¤í”„ë¼ì¸ì—ì„œë„ ê´€ì‹¬ ë§¤ë¬¼ ëª©ë¡ ì¡°íšŒ ê°€ëŠ¥
â†’ ì˜¨ë¼ì¸ ë³µê·€ ì‹œ ìë™ ë™ê¸°í™”
```

---

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì™„ë£Œ ì „ í™•ì¸

- [ ] Next.js App Router í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ì •
- [ ] Tailwind CSS ë””ìì¸ í† í° ì ìš© (tailwind.config.ts)
- [ ] ì¹´ì¹´ì˜¤ë§µ ì—°ë™ ë° ë§¤ë¬¼ ë§ˆì»¤ í‘œì‹œ
- [ ] ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°ë§ êµ¬í˜„ (ì¤Œ ë ˆë²¨ë³„)
- [ ] ì§€ë„ ì´ë™ ì‹œ ë§¤ë¬¼ ìë™ ë¡œë“œ (debounce 300ms)
- [ ] ë§¤ë¬¼ í•„í„° (ê°€ê²©, ë©´ì , ìœ í˜•) URL ìƒíƒœ ë™ê¸°í™” (nuqs)
- [ ] ë§¤ë¬¼ ìƒì„¸ í˜ì´ì§€ êµ¬í˜„
- [ ] ë¶„ì„ ìš”ì²­ ë° Realtime ìƒíƒœ í‘œì‹œ
- [ ] ë ˆì´ë” ì°¨íŠ¸ + ScoreBadge êµ¬í˜„
- [ ] ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ (ë°ìŠ¤í¬í†± SidePanel / ëª¨ë°”ì¼ BottomSheet)
- [ ] ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”© UI
- [ ] Supabase Auth ì—°ë™ (ë¡œê·¸ì¸/íšŒì›ê°€ì…)
- [ ] ê´€ì‹¬ ë§¤ë¬¼ CRUD
- [ ] Lighthouse ì„±ëŠ¥ ì ìˆ˜ 90+ í™•ì¸

---

## ğŸ“ ì˜ˆìƒ ì§ˆë¬¸ & ë‹µë³€

**Q: ì™œ react-kakao-maps-sdkë¥¼ ì“°ë‚˜ìš”?**
A: ì¹´ì¹´ì˜¤ë§µ JavaScript SDKë¥¼ React ì„ ì–¸ì  ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê³µì‹ ì§€ì› ë˜í¼ì…ë‹ˆë‹¤. ì§ì ‘ DOM ì¡°ì‘ ì—†ì´ Map, Marker, CustomOverlay ë“±ì„ JSXë¡œ ë Œë”ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Q: TanStack Query vs SWR?**
A: TanStack Queryê°€ ìºì‹œ ë¬´íš¨í™”, ë¬´í•œ ìŠ¤í¬ë¡¤, Optimistic Update ë“± ê¸°ëŠ¥ì´ ë” í’ë¶€í•©ë‹ˆë‹¤. íŠ¹íˆ `placeholderData`ë¡œ ì§€ë„ ì´ë™ ì‹œ ê¹œë¹¡ì„ ì—†ì´ ì´ì „ ë°ì´í„°ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Q: Zustand vs Context API?**
A: ZustandëŠ” ì„ íƒì  êµ¬ë…(selector)ì„ ì§€ì›í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì„ ë°©ì§€í•©ë‹ˆë‹¤. ì§€ë„ ìƒíƒœì²˜ëŸ¼ ìì£¼ ë³€ê²½ë˜ëŠ” ê°’ì— ì í•©í•©ë‹ˆë‹¤.

**Q: ë°”í…€ì‹œíŠ¸ë¥¼ ì§ì ‘ êµ¬í˜„í•˜ëŠ” ì´ìœ ëŠ”?**
A: ë¼ì´ë¸ŒëŸ¬ë¦¬(react-spring-bottom-sheet ë“±)ë„ ìˆì§€ë§Œ, 3ë‹¨ê³„ ìŠ¤ëƒ…(collapsed/half/full)ê³¼ ì¹´ì¹´ì˜¤ë§µ ìœ„ ì˜¤ë²„ë ˆì´ë¼ëŠ” íŠ¹ìˆ˜ ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ Framer Motionìœ¼ë¡œ ì»¤ìŠ¤í…€ êµ¬í˜„í•©ë‹ˆë‹¤.

---

## ğŸ”— ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- [Next.js App Router](https://nextjs.org/docs/app)
- [react-kakao-maps-sdk](https://react-kakao-maps-sdk.jaeseokim.dev/)
- [TanStack Query](https://tanstack.com/query/latest)
- [Zustand](https://zustand-demo.pmnd.rs/)
- [nuqs](https://nuqs.47ng.com/)
- [Recharts](https://recharts.org/)
- [Framer Motion](https://www.framer.com/motion/)

### íŒ€ ë¬¸ì„œ
- [ê°œë°œíŒ€ ê°œìš”](./DEV_TEAM_OVERVIEW.md)
- [UI/UX ë””ìì´ë„ˆ](./UI_UX_DESIGNER.md)
- [ë°±ì—”ë“œ ê°œë°œì](./BACKEND_DEVELOPER.md)
- [í”„ë¡œë•íŠ¸ ë§¤ë‹ˆì €](./PRODUCT_MANAGER.md)
- [ë°ì´í„° ì—”ì§€ë‹ˆì–´](./DATA_ENGINEER.md)

---

**ì—­í•  ë²„ì „**: 1.0
**ìµœì¢… ìˆ˜ì •ì¼**: 2026-02-15
**ë‹´ë‹¹ ì˜ì—­**: ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤, í´ë¼ì´ì–¸íŠ¸ ë¡œì§, ì§€ë„ ì—°ë™
**í˜‘ì—… íŒ€ì›**: UI/UX ë””ìì´ë„ˆ, ë°±ì—”ë“œ ê°œë°œì, í”„ë¡œë•íŠ¸ ë§¤ë‹ˆì €
